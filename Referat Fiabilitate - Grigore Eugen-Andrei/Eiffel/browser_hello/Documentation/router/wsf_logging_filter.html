<HTML><HEAD>
<meta name="description" content="Logging filter."/>
<meta name="author" content="Olivier Ligot"/>
<meta name="keywords" content="Eiffel class"/>
<meta name="copyright" content="2011-2012, Olivier Ligot, Jocelyn Fiat and others"/>
<meta name="license" content="Eiffel Forum License v2 (see http://www.eiffel.com/licensing/forum.txt)"/>
<meta name="keywords" content="Eiffel class"/>
<TITLE>wsf_logging_filter Text</TITLE></HEAD>
<BODY BGCOLOR="white">
<P ALIGN="CENTER">Automatic generation produced by ISE Eiffel</P>
<PRE><TABLE BORDER="1" ALIGN="CENTER"><TR><TD><A HREF="../class_list.html">Classes</A></TD><TD><A HREF="../cluster_list.html">Clusters</A></TD><TD><A HREF="../cluster_hierarchy.html">Cluster hierarchy</A></TD><TD><A HREF="wsf_logging_filter_chart.html">Chart</A></TD><TD><A HREF="wsf_logging_filter_links.html">Relations</A></TD><TD>Text</TD></TR></TABLE><B>note</B>
    description: "Logging filter."
    author: "Olivier Ligot"
    date: "$Date: 2013-05-20 13:34:55 +0000 (Mon, 20 May 2013) $"
    revision: "$Revision: 92549 $"

<B>class</B> 
    <A HREF="../router/wsf_logging_filter.html">WSF_LOGGING_FILTER</A>

<B>inherit</B>
    <A HREF="../router/wsf_filter.html">WSF_FILTER</A>
        <B>redefine</B>
            <A HREF="../router/wsf_logging_filter.html#f_default_create">default_create</A>
        <B>end</B>

<B>create</B> 
    <A HREF="../router/wsf_logging_filter.html#f_default_create">default_create</A>,
    <A HREF="../router/wsf_logging_filter.html#f_make_with_output">make_with_output</A>

<B>feature</B> {NONE} <FONT COLOR="red">--</FONT><FONT COLOR="red"> Initialization</FONT>

    <A NAME="f_default_create"><A HREF="../router/wsf_logging_filter.html#f_default_create">default_create</A>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Process instances of classes with no creation clause.</FONT>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> (Default: do nothing.)</FONT>
        <B>do</B>
            <B>Precursor</B>
            <A HREF="../router/wsf_logging_filter.html#f_output">output</A> := <A HREF="../elks/any.html#f_io">Io</A>.<A HREF="../elks/std_files.html#f_output">Output</A>
        <B>end</B></A>

    <A NAME="f_make_with_output"><A HREF="../router/wsf_logging_filter.html#f_make_with_output">make_with_output</A> (a_output: <B>like</B> <A HREF="../router/wsf_logging_filter.html#f_output">output</A>)
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Create Current with </FONT><I>a_output</I><FONT COLOR="red"> as </FONT><FONT COLOR="red">`</FONT><A HREF="../router/wsf_logging_filter.html#f_output">output</A><FONT COLOR="red">`</FONT>
        <B>require</B>
            a_output_opened: a_output.<A HREF="../elks/file.html#f_is_open_read">is_open_read</A>
        <B>do</B>
            <A HREF="../router/wsf_logging_filter.html#f_default_create">default_create</A>
            <A HREF="../router/wsf_logging_filter.html#f_output">output</A> := a_output
        <B>end</B></A>

    <A NAME="f_output"><A HREF="../router/wsf_logging_filter.html#f_output">output</A>: <A HREF="../elks/file.html">FILE</A></A>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Output file</FONT>
    
<B>feature</B> <FONT COLOR="red">--</FONT><FONT COLOR="red"> Basic operations</FONT>

    <A NAME="f_execute"><A HREF="../router/wsf_logging_filter.html#f_execute">execute</A> (req: <A HREF="../src/wsf_request.html">WSF_REQUEST</A>; res: <A HREF="../src/wsf_response.html">WSF_RESPONSE</A>)
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Execute the filter</FONT>
        <B>local</B>
            l_date: DATE_TIME
            s: <A HREF="../elks/string_8.html">STRING_8</A>
        <B>do</B>
            <B>create</B> s.<A HREF="../elks/readable_string_8.html#f_make">make</A> (64);
            s.<A HREF="../elks/string_8.html#f_append">append</A> (req.<A HREF="../src/wsf_request.html#f_remote_addr">remote_addr</A>);
            s.<A HREF="../elks/string_8.html#f_append">append</A> (" - - [")
            <B>create</B> l_date.make_now_utc;
            s.<A HREF="../elks/string_8.html#f_append">append</A> (l_date.formatted_out (<A HREF="../router/wsf_logging_filter.html#f_date_time_format">Date_time_format</A>));
            s.<A HREF="../elks/string_8.html#f_append">append</A> (" GMT] %"");
            s.<A HREF="../elks/string_8.html#f_append">append</A> (req.<A HREF="../src/wsf_request.html#f_request_method">request_method</A>);
            s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> (' ');
            s.<A HREF="../elks/string_8.html#f_append">append</A> (req.<A HREF="../src/wsf_request.html#f_request_uri">request_uri</A>);
            s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> (' ');
            s.<A HREF="../elks/string_8.html#f_append">append</A> ({<A HREF="../src/http_constants.html">HTTP_CONSTANTS</A>}.<A HREF="../src/http_constants.html#f_http_version_1_1">http_version_1_1</A>);
            s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> ('"');
            s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> (' ');
            s.<A HREF="../elks/string_8.html#f_append_integer">append_integer</A> (res.<A HREF="../src/wsf_response.html#f_status_code">status_code</A>);
            s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> (' ');
            s.<A HREF="../elks/string_8.html#f_append_natural_64">append_natural_64</A> (res.<A HREF="../src/wsf_response.html#f_transfered_content_length">transfered_content_length</A>);
            s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> (' ')
            <B>if</B> <B>attached</B> req.<A HREF="../src/wsf_request.html#f_http_referer">http_referer</A> <B>as</B> r <B>then</B>
                s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> ('"');
                s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> ('"');
                s.<A HREF="../elks/string_8.html#f_append">append</A> (r);
                s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> (' ')
            <B>end</B>
            <B>if</B> <B>attached</B> req.<A HREF="../src/wsf_request.html#f_http_user_agent">http_user_agent</A> <B>as</B> ua <B>then</B>
                s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> ('"');
                s.<A HREF="../elks/string_8.html#f_append">append</A> (ua);
                s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> ('"')
            <B>else</B>
                s.<A HREF="../elks/string_8.html#f_append_character">append_character</A> ('-')
            <B>end</B>;
            <A HREF="../router/wsf_logging_filter.html#f_output">output</A>.<A HREF="../elks/file.html#f_put_string">put_string</A> (s);
            <A HREF="../router/wsf_logging_filter.html#f_output">output</A>.<A HREF="../elks/file.html#f_put_new_line">put_new_line</A>
            <A HREF="../router/wsf_filter.html#f_execute_next">execute_next</A> (req, res)
        <B>end</B></A>
    
<B>feature</B> <FONT COLOR="red">--</FONT><FONT COLOR="red"> Constants</FONT>

    <A NAME="f_date_time_format"><A HREF="../router/wsf_logging_filter.html#f_date_time_format">Date_time_format</A>: <A HREF="../elks/string_8.html">STRING_8</A> = "[0]dd/[0]mm/yyyy [0]hh:[0]mi:[0]ss"</A>
    
<B>note</B>
    copyright: "2011-2012, Olivier Ligot, Jocelyn Fiat and others"
    license: "Eiffel Forum License v2 (see <a href="http://www.eiffel.com/licensing/forum.txt">http://www.eiffel.com/licensing/forum.txt</a>)"

<B>end</B> <FONT COLOR="red">--</FONT> <FONT COLOR="red">class </FONT><A HREF="../router/wsf_logging_filter.html">WSF_LOGGING_FILTER</A><TABLE BORDER="1" ALIGN="CENTER"><TR><TD><A HREF="../class_list.html">Classes</A></TD><TD><A HREF="../cluster_list.html">Clusters</A></TD><TD><A HREF="../cluster_hierarchy.html">Cluster hierarchy</A></TD><TD><A HREF="wsf_logging_filter_chart.html">Chart</A></TD><TD><A HREF="wsf_logging_filter_links.html">Relations</A></TD><TD>Text</TD></TR></TABLE></PRE>
<P ALIGN="CENTER"> &#045;&#045; Generated by ISE Eiffel &#045;&#045 </P>
<P ALIGN="CENTER">For more details: <A HREF="http://www.eiffel.com">www.eiffel.com</A></P>
</BODY>
</HTML>

